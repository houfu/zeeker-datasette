{% extends "default:index.html" %}

{% block extra_head %}
{{ super() }}
<meta name="description"
      content="Explore Singapore legal data through search and SQL queries. Legal news database with court cases coming soon.">
<meta name="keywords" content="Singapore law, legal data, court decisions, legal research">
<meta property="og:title" content="data.zeeker.sg - Explore Singapore Legal Data">
<meta property="og:description"
      content="Search and query Singapore legal data - legal news database with court cases coming soon">
<meta property="og:type" content="website">

<!-- Preload critical hero image -->
<link rel="preload" href="/static/images/supcourt-sg.png" as="image">
{% endblock %}

{% block nav %}
{% include "_header.html" %}
{% endblock %}

{% block content %}
<!-- Enhanced Hero Banner Section -->
<section class="hero-enhanced">
    <div class="hero-bg-container">
        <picture class="hero-background-picture">
            <!-- WebP versions for modern browsers -->
            <source
                    media="(max-width: 768px)"
                    srcset="/static/images/supcourt-sg-mobile.webp"
                    type="image/webp">
            <source
                    media="(max-width: 1024px)"
                    srcset="/static/images/supcourt-sg-tablet.webp"
                    type="image/webp">
            <source
                    media="(min-width: 1025px)"
                    srcset="/static/images/supcourt-sg.webp"
                    type="image/webp">

            <!-- PNG fallbacks -->
            <source
                    media="(max-width: 768px)"
                    srcset="/static/images/supcourt-sg-mobile.png">
            <source
                    media="(max-width: 1024px)"
                    srcset="/static/images/supcourt-sg-tablet.png">

            <!-- Default fallback -->
            <img
                    src="/static/images/supcourt-sg.png"
                    alt="Singapore Supreme Court"
                    class="hero-background-image loading"
                    loading="eager">
        </picture>
        <div class="hero-overlay-gradient"></div>
    </div>

    <div class="hero-content-wrapper">
        <div class="hero-glass-card">
            <h1 class="hero-title-main">{{ str_site_title }}</h1>
            <p class="hero-tagline-main">
                Explore Singapore legal data through search and SQL queries
            </p>

            <div class="hero-search-container">
                <form class="hero-search-form" action="/-/search">
                    <div class="hero-search-wrapper">
                        <input
                                type="search"
                                name="q"
                                class="hero-search-input"
                                placeholder="Search legal news, cases, decisions..."
                                aria-label="Search legal data"
                        >
                    </div>
                </form>
            </div>

            <div class="hero-cta-group">
                <a href="/-/search" class="cta-primary">
                    🔍 Start Searching
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Add proper spacing before next section -->
<div class="section-spacer"></div>

{% if databases %}
<section class="databases-section">
    <h2>Available Data</h2>
    <div class="database-grid">
        {% for database in databases %}
        <div class="card database-card">
            <h3>
                <a href="/{{ database.name }}">
                    {% if metadata.databases[database.name] and metadata.databases[database.name].title %}
                    {{ metadata.databases[database.name].title }}
                    {% else %}
                    {{ database.name|title }}
                    {% endif %}
                </a>
            </h3>
            <div class="database-meta">
                {% if database.table_count is defined and database.table_count %}
                <span class="table-count">{{ database.table_count }} table{{ database.table_count|pluralize }}</span>
                {% endif %}
                {% if database.size is defined and database.size %}
                <span class="database-size">{{ database.size|filesizeformat }}</span>
                {% endif %}
            </div>
            {% if database.description %}
            <p class="database-description">{{ database.description }}</p>
            {% elif metadata.databases[database.name] and metadata.databases[database.name].description %}
            <p class="database-description">{{ metadata.databases[database.name].description }}</p>
            {% endif %}

            <div class="database-actions">
                <a href="/{{ database.name }}" class="btn">Explore Data</a>
                <a href="/{{ database.name }}.json" class="btn btn-secondary">JSON</a>
            </div>
    </div>
    {% endfor %}
    </div>
</section>
{% endif %}

<!-- Add spacing before platform section -->
<div class="section-spacer"></div>

<section class="about-section">
    <div class="card">
        <h2>What's Here</h2>
        <p>Currently focusing on legal news data, with court decisions being added soon. All data is searchable and
            available through a full SQL interface.</p>

        <div class="features-list">
            <h3>How to Use</h3>
            <ul>
                <li>🔍 <strong>Search</strong> - Full-text search across all legal documents</li>
                <li>💻 <strong>SQL Queries</strong> - Write custom queries against the database</li>
                <li>📊 <strong>Export Data</strong> - Download results as JSON or CSV</li>
                <li>⚡ <strong>Updated Regularly</strong> - Data refreshes automatically</li>
            </ul>
        </div>
    </div>
</section>

<section class="sql-section">
    <div class="card">
        <h2>🔌 For Developers</h2>
        <p>Full REST API access to all data. Perfect for building tools or conducting research.</p>

        <div class="api-example">
            <h3>Quick Examples</h3>
            <pre><code># Get all databases
curl https://data.zeeker.sg/.json

# Search all data
curl "https://data.zeeker.sg/-/search.json?q=contract+law"

# Custom SQL query
curl "https://data.zeeker.sg/[database]?sql=SELECT * FROM [table] LIMIT 10"</code></pre>
        </div>

        <div class="api-links">
            <a href="/how-to-use" class="btn">How to use</a>
            <a href="/sglawwatch?sql=SELECT%20name%20FROM%20sqlite_master%20WHERE%20type%3D%27table%27"
               class="btn btn-secondary">Try SQL Editor</a></div>
    </div>
</section>
{% endblock %}

{% block footer %}
{% include "_footer.html" %}
{% endblock %}