{% extends "default:base.html" %}

{% block extra_head %}
<meta name="description" content="Data sources for Singapore legal information on Zeeker">
{% endblock %}

{% block nav %}
{% include "_header.html" %}
{% endblock %}

{% block title %}Data Sources - Zeeker{% endblock %}

{% block content %}
<div class="container">
    <div style="text-align: center; padding: 2rem 0;">
        <h1>Data Sources</h1>
        <p style="font-size: 1.2rem; color: var(--color-text-secondary);">
            Where the legal data comes from and how it's collected
        </p>
    </div>

    <div class="card">
        <h2>🔍 Data Collection</h2>
        <p>
            Zeeker aggregates legal information from various Singapore sources including government websites, 
            judicial systems, and legal news outlets. All data collection respects robots.txt and terms of service.
        </p>
        
        <p>
            Data is automatically processed, structured, and made searchable while maintaining links 
            to original sources where possible.
        </p>
    </div>

    {% if databases %}
    <h2>📊 Current Databases</h2>

    {% for database in databases %}
    <div class="card">
        <h3>
            <a href="/{{ database.name }}">{{ database.name|title }}</a>
        </h3>

        <div class="database-meta">
            {% if database.table_count is defined and database.table_count %}
            <span class="table-count">{{ database.table_count }} table{{ database.table_count|pluralize }}</span>
            {% endif %}
            {% if database.size is defined and database.size %}
            <span class="database-size">{{ database.size|filesizeformat }}</span>
            {% endif %}
        </div>

        {% if database.description %}
        <p>{{ database.description }}</p>
        {% endif %}

        {% if database.source_url %}
        <p><strong>Source:</strong> <a href="{{ database.source_url }}" target="_blank">{{ database.source_url }}</a></p>
        {% endif %}

        {% if database.license %}
        <p><strong>License:</strong>
            {% if database.license_url %}
            <a href="{{ database.license_url }}" target="_blank">{{ database.license }}</a>
            {% else %}
            {{ database.license }}
            {% endif %}
        </p>
        {% endif %}

        {% if database.tables %}
        <div class="table-preview">
            <h4>Available Tables:</h4>
            <ul>
                {% for table in database.tables[:5] %}
                <li>
                    <a href="/{{ database.name }}/{{ table.name }}">{{ table.name|title }}</a>
                    {% if table.count is defined and table.count %}<span class="row-count">({{ table.count|safe_format }} rows)</span>{% endif %}
                </li>
                {% endfor %}
                {% if database.tables|length > 5 %}
                <li><em>...and {{ database.tables|length - 5 }} more</em></li>
                {% endif %}
            </ul>
        </div>
        {% endif %}

        <div style="margin-top: 1rem;">
            <a href="/{{ database.name }}" class="btn">Explore Database</a>
            <a href="/{{ database.name }}.json" class="btn btn-secondary">JSON</a>
        </div>
    </div>
    {% endfor %}

    {% else %}
    <div class="card">
        <h2>📊 No Databases Available</h2>
        <p>No databases are currently loaded. Data will appear here once databases are synchronized.</p>
    </div>
    {% endif %}

    <div class="card">
        <h2>📄 Licensing & Attribution</h2>
        <p>
            <strong>Government Sources:</strong> Most Singapore government data is available under open data licenses<br>
            <strong>Court Decisions:</strong> Public domain judicial records<br>
            <strong>Parliamentary Proceedings:</strong> Public records available for research use<br>
            <strong>Zeeker Database:</strong> Available under Creative Commons Attribution (CC-BY-4.0)
        </p>
        
        <p>
            All original sources are credited and linked where available. The database serves as an access layer 
            that enhances discoverability while respecting original licensing.
        </p>
    </div>

    <div class="card">
        <h2>🔄 Updates & Quality</h2>
        <p>
            <strong>Data Freshness:</strong> Most sources update daily or as new information becomes available<br>
            <strong>Processing:</strong> Automated collection with manual quality checks<br>
            <strong>Validation:</strong> Cross-referencing with official sources when possible
        </p>
        
        <p>
            The goal is accuracy and completeness while maintaining reasonable update frequency 
            for an independent project.
        </p>
    </div>

    <div class="card" style="text-align: center;">
        <h2>📞 Questions?</h2>
        <p>
            Questions about data sources, attribution, or access? 
        </p>
        
        <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1.5rem; flex-wrap: wrap;">
            <a href="/how-to-use" class="btn btn-primary">📊 How to Use</a>
            <a href="about" class="btn btn-secondary">ℹ️ Learn More</a>
        </div>
    </div>
</div>
{% endblock %}

{% block footer %}
{% include "_footer.html" %}
{% endblock %}